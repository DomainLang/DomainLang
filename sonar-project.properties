# SonarQube Configuration for DomainLang
# https://docs.sonarqube.org/latest/analysis/analysis-parameters/

# ============================================================================
# Project Information
# ============================================================================
sonar.projectKey=DomainLang_DomainLang
sonar.organization=domainlang

# Displayed in SonarQube UI
sonar.projectName=DomainLang
sonar.projectVersion=1.0.0

# ============================================================================
# Source Code Configuration
# ============================================================================
# Root directory containing source code
sonar.sources=dsl/domain-lang/packages/language/src,dsl/domain-lang/packages/cli/src,dsl/domain-lang/packages/extension/src

# Test directories (excluded from main analysis)
sonar.tests=dsl/domain-lang/packages/language/test,dsl/domain-lang/packages/cli/test

# Encoding
sonar.sourceEncoding=UTF-8

# ============================================================================
# Exclusions - Files to ignore
# ============================================================================
# Generated code (NEVER edit manually)
sonar.exclusions=\
  **/generated/**,\
  **/*.generated.ts,\
  **/node_modules/**,\
  **/dist/**,\
  **/lib/**,\
  **/coverage/**,\
  **/*.test.ts,\
  **/*.spec.ts,\
  **/test-helpers.ts,\
  **/vitest.config.ts,\
  **/vite.config.ts,\
  **/eslint.config.js,\
  **/*.d.ts

# Test files explicitly excluded from coverage requirements
sonar.test.exclusions=\
  **/*.test.ts,\
  **/*.spec.ts,\
  **/test/**,\
  **/test-helpers.ts

# ============================================================================
# Coverage Configuration
# ============================================================================
# Coverage report from Vitest v8
# SonarQube accepts multiple formats: lcov, clover (XML), or generic coverage reports
sonar.coverage.reportPaths=dsl/domain-lang/packages/language/coverage/clover.xml

# Coverage exclusions - files not requiring test coverage
sonar.coverage.exclusions=\
  **/generated/**,\
  **/*.generated.ts,\
  **/*.test.ts,\
  **/*.spec.ts,\
  **/test/**,\
  **/test-helpers.ts,\
  **/examples/**,\
  **/demo/**,\
  **/cli.ts,\
  **/main.ts

# ============================================================================
# Language-Specific Settings
# ============================================================================
# TypeScript/JavaScript analysis
sonar.javascript.node.maxspace=4096

# ============================================================================
# Quality Gate Thresholds (adjust as needed)
# ============================================================================
# These are configured in SonarQube Cloud UI, documented here for reference:
# - Code Coverage: >= 80%
# - Maintainability Rating: A
# - Reliability Rating: A
# - Security Rating: A
# - Duplicated Lines: <= 3%

# ============================================================================
# Issue Detection
# ============================================================================
# Enable all available analyzers
sonar.javascript.globals=console,process,require,module,exports,__dirname,__filename

# ============================================================================
# Pull Request Analysis
# ============================================================================
# Automatically configured by GitHub Actions integration
# sonar.pullrequest.key=
# sonar.pullrequest.branch=
# sonar.pullrequest.base=
