---
outline: deep
---

# Syntax diagrams

Visual railroad diagrams showing exactly what DomainLang syntax is valid.

## What are these diagrams?

These **railroad diagrams** (also called syntax diagrams) are a visual way to understand the grammar rules of DomainLang. They show every valid way to write each construct in the language.

### When to use them

- **Resolving syntax questions** — "Can I put `description` before `vision`?" Follow the diagram to find out
- **Understanding optional vs required** — Paths that can be skipped are optional; single paths are required
- **Learning advanced syntax** — Discover features you might not know exist
- **Language implementers** — If you're building tooling for DomainLang

### How to read them

Follow the arrows from left to right. When paths split, you can take any branch. Loops mean you can repeat that element.

| Element | Meaning |
|---------|---------|
| **Blue boxes** | Grammar rules (click-through to other diagrams) |
| **Rounded boxes** | Literal keywords or tokens to type |
| **Split paths** | Choose one option |
| **Loop arrows** | Repeat zero or more times |

::: tip
For most users, the [Language Reference](/reference/language) and [Quick Reference](/reference/quick-reference) are easier to use. These diagrams are the authoritative technical specification.
:::

### About railroad diagrams

[Railroad diagrams](https://en.wikipedia.org/wiki/Syntax_diagram) (or syntax diagrams) are a standard way to visualize context-free grammars. They were popularized by the Pascal User Manual and are used by many language specifications including [JSON](https://www.json.org/) and [SQLite](https://www.sqlite.org/syntaxdiagrams.html).

::: info Generated by Langium
These diagrams are automatically generated from DomainLang's grammar definition using [Langium](https://langium.org/)'s built-in railroad diagram generator. They always reflect the current language syntax.
:::

---

<script setup>
import { ref, onMounted } from 'vue'

const diagramHtml = ref('')
const currentZoom = ref(1)
const container = ref(null)
let isDragging = false
let startX, startY, scrollLeft, scrollTop

onMounted(async () => {
  const response = await fetch('/syntax-diagram.html')
  const html = await response.text()
  const parser = new DOMParser()
  const doc = parser.parseFromString(html, 'text/html')
  
  // Remove the original style tag
  const style = doc.querySelector('style')
  if (style) style.remove()
  
  diagramHtml.value = doc.body.innerHTML
})

function zoomIn() {
  currentZoom.value = Math.min(currentZoom.value + 0.2, 3)
}

function zoomOut() {
  currentZoom.value = Math.max(currentZoom.value - 0.2, 0.5)
}

function resetZoom() {
  currentZoom.value = 1
  if (container.value) {
    container.value.scrollTo(0, 0)
  }
}

function onWheel(e) {
  if (e.ctrlKey || e.metaKey) {
    e.preventDefault()
    if (e.deltaY < 0) zoomIn()
    else zoomOut()
  }
}

function onMouseDown(e) {
  if (!container.value) return
  isDragging = true
  startX = e.pageX - container.value.offsetLeft
  startY = e.pageY - container.value.offsetTop
  scrollLeft = container.value.scrollLeft
  scrollTop = container.value.scrollTop
}

function onMouseUp() {
  isDragging = false
}

function onMouseMove(e) {
  if (!isDragging || !container.value) return
  e.preventDefault()
  const x = e.pageX - container.value.offsetLeft
  const y = e.pageY - container.value.offsetTop
  container.value.scrollLeft = scrollLeft - (x - startX) * 2
  container.value.scrollTop = scrollTop - (y - startY) * 2
}

function onKeyDown(e) {
  if (e.key === '+' || e.key === '=') {
    e.preventDefault()
    zoomIn()
  } else if (e.key === '-') {
    e.preventDefault()
    zoomOut()
  } else if (e.key === '0') {
    e.preventDefault()
    resetZoom()
  }
}
</script>

<div class="railroad-wrapper" tabindex="0" @keydown="onKeyDown">
  <div class="zoom-controls">
    <button class="zoom-btn" @click="zoomIn">Zoom In (+)</button>
    <button class="zoom-btn" @click="zoomOut">Zoom Out (-)</button>
    <button class="zoom-btn" @click="resetZoom">Reset (0)</button>
    <span class="zoom-level">{{ Math.round(currentZoom * 100) }}%</span>
  </div>
  <div 
    ref="container"
    class="diagram-container"
    @wheel="onWheel"
    @mousedown="onMouseDown"
    @mouseup="onMouseUp"
    @mouseleave="onMouseUp"
    @mousemove="onMouseMove"
  >
    <div class="diagram-content" :style="{ transform: `scale(${currentZoom})` }" v-html="diagramHtml"></div>
  </div>
</div>

<style scoped>
.railroad-wrapper {
  margin: 2rem 0;
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid var(--vp-c-divider);
  outline: none;
}

.zoom-controls {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.5rem 1rem;
  background: var(--vp-c-bg);
  border-bottom: 1px solid var(--vp-c-divider);
  opacity: 0.7;
  transition: opacity 0.2s;
}

.zoom-controls:hover {
  opacity: 1;
}

.zoom-btn {
  padding: 0.25rem 0.5rem;
  background: transparent;
  border: 1px solid transparent;
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
  font-weight: 500;
  color: var(--vp-c-text-2);
  transition: all 0.2s;
}

.zoom-btn:hover {
  background: var(--vp-c-bg-soft);
  border-color: var(--vp-c-divider);
  color: var(--vp-c-text-1);
}

.zoom-level {
  padding: 0.25rem 0.5rem;
  font-size: 11px;
  font-weight: 500;
  color: var(--vp-c-text-3);
  font-family: var(--vp-font-family-mono);
}

.diagram-container {
  overflow: auto;
  max-height: 75vh;
  padding: 1.5rem;
  cursor: grab;
  scrollbar-width: none;
  -ms-overflow-style: none;
  user-select: none;
  -webkit-user-select: none;
}

.diagram-container::-webkit-scrollbar {
  display: none;
}

.diagram-container:active {
  cursor: grabbing;
}

.diagram-content {
  transform-origin: top left;
  transition: transform 0.1s ease-out;
  width: max-content;
}

/* Style the railroad diagram elements */
:deep(h2.non-terminal-name) {
  font-size: 1.1rem;
  font-weight: 600;
  margin: 2.5rem 0 0.75rem;
  color: var(--vp-c-text-1);
  padding: 0;
  border-bottom: 1px solid var(--vp-c-divider);
  padding-bottom: 0.5rem;
}

:deep(h2.non-terminal-name:first-child) {
  margin-top: 0;
}

:deep(svg.railroad-diagram) {
  background: transparent !important;
  display: block;
  margin: 0.75rem 0 1rem;
  overflow: visible;
  max-width: none !important;
  width: auto !important;
  height: auto !important;
}

:deep(svg.railroad-diagram path) {
  stroke-width: 3;
  stroke: var(--vp-c-text-3);
  fill: rgba(0, 0, 0, 0);
}

:deep(svg.railroad-diagram text) {
  /* Keep original font metrics for correct positioning */
  font: bold 14px monospace;
  text-anchor: middle;
  fill: var(--vp-c-text-1);
}

:deep(svg.railroad-diagram text.label) {
  text-anchor: start;
}

:deep(svg.railroad-diagram text.comment) {
  font: italic 12px monospace;
  fill: var(--vp-c-text-2);
}

:deep(svg.railroad-diagram rect) {
  stroke-width: 3;
  stroke: var(--vp-c-brand-1);
  fill: var(--vp-c-brand-soft);
}

:deep(svg.railroad-diagram circle) {
  stroke: var(--vp-c-text-3);
  fill: var(--vp-c-text-3);
}
</style>

